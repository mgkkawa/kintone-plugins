<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>プラグインの設定</title>
    <link rel="stylesheet" type="text/css" href="../css/config.css">
</head>
    <body>
        <h2 class="settings-heading">ツールチッププラグイン設定画面</h2>
        <div class="div-unit">
            <div class="block">
                <label class="kintoneplugin-label">
                    <span id ="container_label">イベント名フィールド</span>
                    <div class="balloon-outer">
                        <span class="kintoneplugin-require">*</span>
                        <div class="balloon">
                            <p>hoverしたら表示したい文字を入力してください。</p>
                        </div>    
                    </div>
                </label>
                <div class="kintoneplugin-row">イベント名として使用する文字列フィールドのフィールド名を選択して下さい。</div>
                    <div>
                        <div id="formArea-outer">
                            <div id="formArea_0" class="formArea">
                                <select id="selectform_0" class="selectform">
                                </select>
                                <input type="text" id="inputform_0" class="inputform" placeholder="テキスト">
                                <button id="0" class="delete-btn" onclick="deleteBtn(this)">削除</button>
                                <br id="br_0">
                            </div>
                        </div> 
                        <input type="button" class="add-btn" value="フォーム追加" onclick="addForm()">
                    </div>
            </div>
            <div class="block">
                <label class="kintoneplugin-label">
                    <span id ="container_label">開始日時フィールド</span>
                    <div class="balloon-outer">
                        <span class="kintoneplugin-require">*</span>
                        <div class="balloon">
                           <p>hoverしたら表示したい文字を入力してください。</p>
                        </div>   
                    </div>
                </label>
                <div class="kintoneplugin-row">イベント開始日時として使用する日時フィールドのフィールド名を選択して下さい。</div>
                <div class="kintoneplugin-select-outer">
                    <div class="kintoneplugin-select">
                        <select id="start_datetime_code">
                        </select>
                    </div>
                </div>
            </div>
            <div class="block">
                <label class="kintoneplugin-label">
                    <span id ="container_label">終了日時フィールド</span>
                    <div class="balloon-outer">
                        <span class="kintoneplugin-require">*</span>
                        <div class="balloon">
                           <p>hoverしたら表示したい文字を入力してください。</p>
                        </div>   
                    </div>                </label>
                <div class="kintoneplugin-row">イベント終了日時として使用する日時フィールドのフィールド名を選択して下さい。</div>
                <div class="kintoneplugin-select-outer">
                    <div class="kintoneplugin-select">
                        <select id="end_datetime_code">
                        </select>
                    </div>
                </div>
            </div>
        </div>

    <script>
        let i = 1 ;
        const divParent = document.getElementById('formArea-outer');

        function addForm() {
            const div_data = document.createElement('div');
            div_data.id = 'formArea_' + i;
            div_data.className = 'formArea';
            divParent.appendChild(div_data);

            const select_data = document.createElement('select');
            select_data.id = 'selectform_' + i;
            const parent = document.getElementById(div_data.id);
            parent.appendChild(select_data);

            const input_data = document.createElement('input');
            input_data.type = 'text';
            input_data.id = 'inputform_' + i;
            input_data.placeholder = 'テキスト';
            parent.appendChild(input_data);

            const button_data = document.createElement('button');
            button_data.id = i;
            button_data.className = 'delete-btn';
            button_data.onclick = function(){deleteBtn(this);}
            button_data.innerHTML = '削除';
            parent.appendChild(button_data);

            i++ ;
        }

        function deleteBtn(target) {
            const res = confirm("削除しますか？");
            if (res == true) {
                const target_id = target.id;
                const div_id = document.getElementById('formArea_' + target_id);
                divParent.removeChild(div_id);
            }

        }        

    </script>
    </body>
</html>